@using TrustMeNews.Services;
@using TrustMeNews.Controllers;

@{
    ViewData["Title"] = "Home Page";
    NewsApiService newsApiService = new NewsApiService();
    GenresApiController genresApiController = new GenresApiController(newsApiService);
    string apiKey = $"https://content.guardianapis.com/search?{NewsApiService.API_KEY}&order-by=newest&show-fields=all&page-size=6";
}

<div class="articles" style="padding-top: 70px">
    @foreach (Result article in newsApiService.SendRequest(apiKey).GetAwaiter().GetResult())
    {
        <div class="article" id="@article.id">
            <img class="image" src="@article.fields.thumbnail" />
            <p>@article.webPublicationDate</p>
            <h5>@article.webTitle</h5>
            <p>@article.fields.trailText</p>
            <h6>@article.fields.byline</h6>
        </div>
    }
</div>
